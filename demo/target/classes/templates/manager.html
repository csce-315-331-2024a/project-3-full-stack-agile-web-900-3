<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manager Table</title>
  <link rel="stylesheet" href="manager.css">
  <script src="https://unpkg.com/htmx.org@1.8.1/dist/htmx.min.js"></script>
</head>
<body id = "updateArea">
  <h2>Products</h2>
  <div id = navBar>
    <a th:href="@{/Inventory/food}" class="nav-btn">Food</a>
    <a th:href="@{/Inventory/utilities}" class="nav-btn">Utilities</a>
    <a th:href="@{/Inventory/condiments}" class="nav-btn">Condiments</a>
    <a th:href="@{/Inventory/desert}" class="nav-btn">Dessert</a>
    <a th:href="@{/Inventory/toppings}" class="nav-btn">Toppings</a>
    <a href="/manager" class="nav-btn">Products</a>
  </div>
  <div class="header">
    <div class="header-item">Name</div>
    <div class="header-item">Price</div>
    <div class="header-item">Type</div>
    <div class="header-item">Action</div>
  </div>
<div th:fragment= "manager-list" class = "manager-list">
  <!-- th: is thymleaf and the each tag is saying each value in the products table and the   ${manager} linkes it to the manager controller logic-->
    <div  class = "products line" th:each="products: ${manager}">
  
  
      <!-- this line is displaying the id attrabute of a row in a product table -->
      <!-- <div class = "id" th:text="${products.product_id}">ID</div> -->
      <form class="item" id="orderForm" hx-post="/manager" hx-target="#updateArea" hx-swap="outerHTML">
      <input  th:value ="${products.product_id}" name = "id" style="display: none;">
      <input name = "new-name" id = styledInput class = "name" th:value="${products.productname}"></input>
      <input name = "new-price" id = styledInput class = "price" th:value="${products.price}"></input>
      <select name="new-products" aria-label="Type">
        <option th:text="${products.productType}" th:value="${products.productType}" disabled selected hidden></option>

        <option value="burger">Burger</option>
        <option value="sandwich">Sandwich</option>
        <option value="sweet">Sweet</option>
        <option value="sauce">Sauce</option>
        <option value="beverage">Beverage</option>
        <option value="salad">Salad</option>
        <option value="seasonal">Seasonal</option>
        <option value="coffee">Coffee</option>
      </select>
      
      <div>
          
          <button type = "submit">
            Update
          </button>
          <button 
          
                  th:attr = "hx-delete = @{/manager/{id}(id = ${products.product_id})}"  
                  hx-swap = "outerHTML"
                  hx-target = "closest .products"
                  
                  >
                  <!-- th:attr is a thymeleaf attribute and hx-delete is a htmx function @{/manager/{id}(id = ${products.product_id})} is mapping for the path varible id and then its saying that id is equal to the corresponding product id in the products table -->
                  Delete
  
          </button>
  
      </div>
    </form>
      
  
    </div>
</div>
    <div id = "addProduct">
      <div class = "line products">
        
        <input type = "text" name = "new-productsName" id = "new-productsName" placeholder = "name"/>
        <input type = "price" name = "new-productsPrice" id = "new-productsPrice" placeholder="price"/>
        <select type = "type" name = "new-productsType" id = "new-productsType" placeholder="Type">
          <option value="burger">Burger</option>
          <option value="sandwich">Sandwich</option>
          <option value="sweet">Sweet</option>
          <option value="sauce">Sauce</option>
          <option value="beverage">Beverage</option>
          <option value="salad">Salad</option>
          <option value="seasonal">Seasonal</option>
          <option value="coffee">Coffee</option>
        </select>
        <div class = "buttons">
          <button 
          hx-post ="/manager/add"
          hx-include = "#new-productsName, #new-productsPrice, #new-productsType"
          hx-target = ".manager-list"
          >Add</button>
        </div>
      </div>
      
    </div>
  </body>
</html>
